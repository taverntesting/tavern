package(default_visibility = ["//:__subpackages__"])

load("@rules_python//python:defs.bzl", "py_library")

# gazelle:ignore

py_library(
    name = "conftest",
    testonly = True,
    srcs = [
        "conftest.py",
    ],
    imports = ["../.."],
    visibility = ["//:__subpackages__"],
    deps = [
        "//tavern",
        "//tavern/_core/internal",
        "//tavern/_core/pytest",
        "//tavern/_core/schema",
        "//tavern/_plugins/mqtt",
        "//tavern/_plugins/rest",
        "//tests:conftest",  # keep
        "@tavern_pip_faker//:pkg",
        "@tavern_pip_paho_mqtt//:pkg",
        "@tavern_pip_py//:pkg",
        "@tavern_pip_pytest//:pkg",
        "@tavern_pip_pyyaml//:pkg",
        "@tavern_pip_requests//:pkg",
    ],
)

load(":gentest.bzl", "gentest")

[
    gentest(f)
    for f in glob(["**/test_*.py"])
]
