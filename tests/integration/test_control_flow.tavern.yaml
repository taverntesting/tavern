---

test_name: Test finally block doing nothing

stages:
  - name: Simple echo
    request:
      url: "{host}/echo"
      method: POST
      json:
        value: "123"
    response:
      status_code: 200
      json:
        value: "123"

finally:
  - name: nothing
    request:
      url: "{host}/echo"
      method: POST
      json:
        value: "123"

---

test_name: Test finally block fail

_xfail: run

stages:
  - name: Simple echo
    request:
      url: "{host}/echo"
      method: POST
      json:
        value: "123"
    response:
      status_code: 200
      json:
        value: "123"

finally:
  - name: nothing
    request:
      url: "{host}/echo"
      method: DELETE
      json:
        value: "123"
    response:
      status_code: 200
      json:
        value: "123"
